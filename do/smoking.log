
. 
. 
. ssc install synth, replace
checking synth consistency and verifying not already installed...
all files already exist and are up to date.

. 
. * Estimation 1: Texas model of black male prisoners (per capita)
. use ../data/smkoing.dta, replace
file ../data/smkoing.dta not found
r(601);

end of do-file

r(601);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. use ../data/smoking.dta, replace
(Tobacco Sales in 39 US States)

. 
end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. 
. #delimit;
delimiter now ;
. synth   cisale
>                 cisale(1988) cisale(1980) cisale(1975)
>                 beer(1988) lnincome(1988) age15to24(1988) retprice(1988)
>                 ,               
>                 trunit(3) trperiod(1988) unitnames(state) 
>                 mspeperiod(1975(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
variable index not found
r(111);

end of do-file

r(111);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. tsset state year
       panel variable:  state (strongly balanced)
        time variable:  year, 1970 to 2000
                delta:  1 unit

. 
. #delimit;
delimiter now ;
. synth   cisale
>                 cisale(1988) cisale(1980) cisale(1975)
>                 beer(1988) lnincome(1988) age15to24(1988) retprice(1988)
>                 ,               
>                 trunit(3) trperiod(1988) unitnames(state) 
>                 mspeperiod(1975(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
numeric variables not allowed in option unitnames();
state is a numeric variable
r(109);

end of do-file

r(109);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. * Estimation 1: Texas model of black male prisoners (per capita)
. use ../data/smoking.dta, replace
(Tobacco Sales in 39 US States)

. 
. tsset state year
       panel variable:  state (strongly balanced)
        time variable:  year, 1970 to 2000
                delta:  1 unit

. 
. #delimit;
delimiter now ;
. synth   cisale
>                 cisale(1988) cisale(1980) cisale(1975)
>                 beer(1988) lnincome(1988) age15to24(1988) retprice(1988)
>                 ,               
>                 trunit(3) trperiod(1988)
>                 mspeperiod(1975(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
--------------------------------------------------------------------------------
Synthetic Control Method for Comparative Case Studies
--------------------------------------------------------------------------------

First Step: Data Setup
--------------------------------------------------------------------------------
cisale does not exist as a (numeric) variable in dataset
r(198);

end of do-file

r(198);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. * Estimation 1: Texas model of black male prisoners (per capita)
. use ../data/smoking.dta, replace
(Tobacco Sales in 39 US States)

. 
. tsset state year
       panel variable:  state (strongly balanced)
        time variable:  year, 1970 to 2000
                delta:  1 unit

. 
. #delimit;
delimiter now ;
. synth   cigsale
>                 cigsale(1988) cigsale(1980) cigsale(1975)
>                 beer(1988) lnincome(1988) age15to24(1988) retprice(1988)
>                 ,               
>                 trunit(3) trperiod(1988)
>                 mspeperiod(1975(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
--------------------------------------------------------------------------------
Synthetic Control Method for Comparative Case Studies
--------------------------------------------------------------------------------

First Step: Data Setup
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Data Setup successful
--------------------------------------------------------------------------------
                Treated Unit: California
               Control Units: Alabama, Arkansas, Colorado, Connecticut,
                              Delaware, Georgia, Idaho, Illinois, Indiana, Iowa,
                              Kansas, Kentucky, Louisiana, Maine, Minnesota,
                              Mississippi, Missouri, Montana, Nebraska, Nevada,
                              New Hampshire, New Mexico, North Carolina, North
                              Dakota, Ohio, Oklahoma, Pennsylvania, Rhode
                              Island, South Carolina, South Dakota, Tennessee,
                              Texas, Utah, Vermont, Virginia, West Virginia,
                              Wisconsin, Wyoming
--------------------------------------------------------------------------------
          Dependent Variable: cigsale
  MSPE minimized for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
Results obtained for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
--------------------------------------------------------------------------------
                  Predictors: cigsale(1988) cigsale(1980) cigsale(1975)
                              beer(1988) lnincome(1988) age15to24(1988)
                              retprice(1988)
--------------------------------------------------------------------------------
Unless period is specified
predictors are averaged over: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
                              1980 1981 1982 1983 1984 1985 1986 1987
--------------------------------------------------------------------------------

Second Step: Run Optimization
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Optimization done
--------------------------------------------------------------------------------

Third Step: Obtain Results
--------------------------------------------------------------------------------
Loss: Root Mean Squared Prediction Error

---------------------
   RMSPE |  1.397134 
---------------------
--------------------------------------------------------------------------------
Unit Weights:

----------------------------
         Co_No | Unit_Weight
---------------+------------
       Alabama |           0
      Arkansas |           0
      Colorado |        .387
   Connecticut |         .01
      Delaware |           0
       Georgia |           0
         Idaho |           0
      Illinois |           0
       Indiana |           0
          Iowa |           0
        Kansas |           0
      Kentucky |           0
     Louisiana |           0
         Maine |           0
     Minnesota |           0
   Mississippi |           0
      Missouri |           0
       Montana |           0
      Nebraska |           0
        Nevada |        .226
 New Hampshire |           0
    New Mexico |           0
North Carolina |           0
  North Dakota |           0
          Ohio |           0
      Oklahoma |           0
  Pennsylvania |           0
  Rhode Island |           0
South Carolina |           0
  South Dakota |           0
     Tennessee |           0
         Texas |           0
          Utah |        .376
       Vermont |           0
      Virginia |           0
 West Virginia |           0
     Wisconsin |           0
       Wyoming |           0
----------------------------
--------------------------------------------------------------------------------
Predictor Balance:

------------------------------------------------------
                               |   Treated  Synthetic 
-------------------------------+----------------------
                 cigsale(1988) |      90.1    90.4076 
                 cigsale(1980) |     120.2    120.162 
                 cigsale(1975) |     127.1    126.675 
                    beer(1988) |      23.6     23.267 
                lnincome(1988) |  10.14166   9.921194 
               age15to24(1988) |  .1575262   .1567604 
                retprice(1988) |     117.4    121.689 
------------------------------------------------------
--------------------------------------------------------------------------------

.                 mat list e(V_matrix);

symmetric e(V_matrix)[7,7]
                                                                          
               cigsale(1988)  cigsale(1980)  cigsale(1975)     beer(1988)
cigsale(1988)      .10076634
cigsale(1980)              0      .62087278
cigsale(1975)              0              0      .27654213
   beer(1988)              0              0              0      .00087937
     lnincome(
        1988)              0              0              0              0
    age15to24(
        1988)              0              0              0              0
     retprice(
        1988)              0              0              0              0

                   lnincome(     age15to24(      retprice(
                       1988)          1988)          1988)
     lnincome(
        1988)      .00056723
    age15to24(
        1988)              0      .00013282
     retprice(
        1988)              0              0      .00023933

.                 * (1) in line 30 means show each year
> 
> #delimit cr
> 
> graph save Graph ../figures/synth_tx.gph, replace

end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. #delimit;
delimiter now ;
. synth   cigsale
>                 cigsale(1988) cigsale(1980) cigsale(1975)
>                 beer(1988) lnincome(1988) age15to24(1988) retprice(1988)
>                 ,               
>                 trunit(3) trperiod(1980)
>                 mspeperiod(1975(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
--------------------------------------------------------------------------------
Synthetic Control Method for Comparative Case Studies
--------------------------------------------------------------------------------

First Step: Data Setup
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Data Setup successful
--------------------------------------------------------------------------------
                Treated Unit: California
               Control Units: Alabama, Arkansas, Colorado, Connecticut,
                              Delaware, Georgia, Idaho, Illinois, Indiana, Iowa,
                              Kansas, Kentucky, Louisiana, Maine, Minnesota,
                              Mississippi, Missouri, Montana, Nebraska, Nevada,
                              New Hampshire, New Mexico, North Carolina, North
                              Dakota, Ohio, Oklahoma, Pennsylvania, Rhode
                              Island, South Carolina, South Dakota, Tennessee,
                              Texas, Utah, Vermont, Virginia, West Virginia,
                              Wisconsin, Wyoming
--------------------------------------------------------------------------------
          Dependent Variable: cigsale
  MSPE minimized for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
Results obtained for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
--------------------------------------------------------------------------------
                  Predictors: cigsale(1988) cigsale(1980) cigsale(1975)
                              beer(1988) lnincome(1988) age15to24(1988)
                              retprice(1988)
--------------------------------------------------------------------------------
Unless period is specified
predictors are averaged over: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
--------------------------------------------------------------------------------

Second Step: Run Optimization
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Optimization done
--------------------------------------------------------------------------------

Third Step: Obtain Results
--------------------------------------------------------------------------------
Loss: Root Mean Squared Prediction Error

---------------------
   RMSPE |  1.397134 
---------------------
--------------------------------------------------------------------------------
Unit Weights:

----------------------------
         Co_No | Unit_Weight
---------------+------------
       Alabama |           0
      Arkansas |           0
      Colorado |        .387
   Connecticut |         .01
      Delaware |           0
       Georgia |           0
         Idaho |           0
      Illinois |           0
       Indiana |           0
          Iowa |           0
        Kansas |           0
      Kentucky |           0
     Louisiana |           0
         Maine |           0
     Minnesota |           0
   Mississippi |           0
      Missouri |           0
       Montana |           0
      Nebraska |           0
        Nevada |        .226
 New Hampshire |           0
    New Mexico |           0
North Carolina |           0
  North Dakota |           0
          Ohio |           0
      Oklahoma |           0
  Pennsylvania |           0
  Rhode Island |           0
South Carolina |           0
  South Dakota |           0
     Tennessee |           0
         Texas |           0
          Utah |        .376
       Vermont |           0
      Virginia |           0
 West Virginia |           0
     Wisconsin |           0
       Wyoming |           0
----------------------------
--------------------------------------------------------------------------------
Predictor Balance:

------------------------------------------------------
                               |   Treated  Synthetic 
-------------------------------+----------------------
                 cigsale(1988) |      90.1    90.4076 
                 cigsale(1980) |     120.2    120.162 
                 cigsale(1975) |     127.1    126.675 
                    beer(1988) |      23.6     23.267 
                lnincome(1988) |  10.14166   9.921194 
               age15to24(1988) |  .1575262   .1567604 
                retprice(1988) |     117.4    121.689 
------------------------------------------------------
--------------------------------------------------------------------------------

.                 mat list e(V_matrix);

symmetric e(V_matrix)[7,7]
                                                                          
               cigsale(1988)  cigsale(1980)  cigsale(1975)     beer(1988)
cigsale(1988)      .10076634
cigsale(1980)              0      .62087278
cigsale(1975)              0              0      .27654213
   beer(1988)              0              0              0      .00087937
     lnincome(
        1988)              0              0              0              0
    age15to24(
        1988)              0              0              0              0
     retprice(
        1988)              0              0              0              0

                   lnincome(     age15to24(      retprice(
                       1988)          1988)          1988)
     lnincome(
        1988)      .00056723
    age15to24(
        1988)              0      .00013282
     retprice(
        1988)              0              0      .00023933

.                 * (1) in line 30 means show each year
> 
> #delimit cr

end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. #delimit;
delimiter now ;
. synth   cigsale
>                 cigsale(1988) cigsale(1980) cigsale(1975)
>                 beer(1984(1)1988) lnincome age15to24 retprice
>                 ,               
>                 trunit(3) trperiod(1980)
>                 mspeperiod(1975(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
--------------------------------------------------------------------------------
Synthetic Control Method for Comparative Case Studies
--------------------------------------------------------------------------------

First Step: Data Setup
--------------------------------------------------------------------------------
control units: for 38 of out 38 units missing obs for predictor lnincome in peri
> od 1970 -ignored for averaging
control units: for 38 of out 38 units missing obs for predictor lnincome in peri
> od 1971 -ignored for averaging
treated unit: for 1 of out 1 units missing obs for predictor lnincome in period 
> 1970 -ignored for averaging
treated unit: for 1 of out 1 units missing obs for predictor lnincome in period 
> 1971 -ignored for averaging
--------------------------------------------------------------------------------
Data Setup successful
--------------------------------------------------------------------------------
                Treated Unit: California
               Control Units: Alabama, Arkansas, Colorado, Connecticut,
                              Delaware, Georgia, Idaho, Illinois, Indiana, Iowa,
                              Kansas, Kentucky, Louisiana, Maine, Minnesota,
                              Mississippi, Missouri, Montana, Nebraska, Nevada,
                              New Hampshire, New Mexico, North Carolina, North
                              Dakota, Ohio, Oklahoma, Pennsylvania, Rhode
                              Island, South Carolina, South Dakota, Tennessee,
                              Texas, Utah, Vermont, Virginia, West Virginia,
                              Wisconsin, Wyoming
--------------------------------------------------------------------------------
          Dependent Variable: cigsale
  MSPE minimized for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
Results obtained for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
--------------------------------------------------------------------------------
                  Predictors: cigsale(1988) cigsale(1980) cigsale(1975)
                              beer(1984(1)1988) lnincome age15to24 retprice
--------------------------------------------------------------------------------
Unless period is specified
predictors are averaged over: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
--------------------------------------------------------------------------------

Second Step: Run Optimization
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Optimization done
--------------------------------------------------------------------------------

Third Step: Obtain Results
--------------------------------------------------------------------------------
Loss: Root Mean Squared Prediction Error

---------------------
   RMSPE |  1.044418 
---------------------
--------------------------------------------------------------------------------
Unit Weights:

----------------------------
         Co_No | Unit_Weight
---------------+------------
       Alabama |           0
      Arkansas |           0
      Colorado |        .244
   Connecticut |        .043
      Delaware |           0
       Georgia |           0
         Idaho |        .168
      Illinois |           0
       Indiana |           0
          Iowa |           0
        Kansas |           0
      Kentucky |           0
     Louisiana |           0
         Maine |           0
     Minnesota |           0
   Mississippi |           0
      Missouri |           0
       Montana |        .074
      Nebraska |           0
        Nevada |         .19
 New Hampshire |           0
    New Mexico |           0
North Carolina |           0
  North Dakota |           0
          Ohio |           0
      Oklahoma |           0
  Pennsylvania |           0
  Rhode Island |           0
South Carolina |           0
  South Dakota |           0
     Tennessee |           0
         Texas |           0
          Utah |        .281
       Vermont |           0
      Virginia |           0
 West Virginia |           0
     Wisconsin |           0
       Wyoming |           0
----------------------------
--------------------------------------------------------------------------------
Predictor Balance:

------------------------------------------------------
                               |   Treated  Synthetic 
-------------------------------+----------------------
                 cigsale(1988) |      90.1    90.6462 
                 cigsale(1980) |     120.2   120.2014 
                 cigsale(1975) |     127.1   126.8586 
             beer(1984(1)1988) |     24.28   23.58424 
                      lnincome |   9.98136   9.799886 
                     age15to24 |  .1832795   .1859041 
                      retprice |     46.13   42.58836 
------------------------------------------------------
--------------------------------------------------------------------------------

.                 mat list e(V_matrix);

symmetric e(V_matrix)[7,7]
               cigsale(1988)  cigsale(1980)  cigsale(1975)   beer(1~1988)
cigsale(1988)       .1051067
cigsale(1980)              0      .61918371
cigsale(1975)              0              0      .27413154
 beer(1~1988)              0              0              0      .00046946
     lnincome              0              0              0              0
    age15to24              0              0              0              0
     retprice              0              0              0              0

                    lnincome      age15to24       retprice
     lnincome        .000597
    age15to24              0      .00022129
     retprice              0              0       .0002903

.                 * (1) in line 30 means show each year
> 
> #delimit cr

end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. graph save Graph ../figures/synth_tx.gph, replace
(note: file ../figures/synth_tx.gph not found)
(file ../figures/synth_tx.gph saved)

. 
end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. * Estimation 1: Texas model of black male prisoners (per capita)
. use ../data/smoking.dta, replace
(Tobacco Sales in 39 US States)

. 
. tsset state year
       panel variable:  state (strongly balanced)
        time variable:  year, 1970 to 2000
                delta:  1 unit

. 
. #delimit;
delimiter now ;
. synth   cigsale
>                 cigsale(1988) cigsale(1980) cigsale(1975)
>                 beer(1984(1)1988) lnincome age15to24 retprice
>                 ,               
>                 trunit(3) trperiod(1988)
>                 mspeperiod(1970(1)1988) resultsperiod(1975(1)1988) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
--------------------------------------------------------------------------------
Synthetic Control Method for Comparative Case Studies
--------------------------------------------------------------------------------

First Step: Data Setup
--------------------------------------------------------------------------------
control units: for 38 of out 38 units missing obs for predictor lnincome in peri
> od 1970 -ignored for averaging
control units: for 38 of out 38 units missing obs for predictor lnincome in peri
> od 1971 -ignored for averaging
treated unit: for 1 of out 1 units missing obs for predictor lnincome in period 
> 1970 -ignored for averaging
treated unit: for 1 of out 1 units missing obs for predictor lnincome in period 
> 1971 -ignored for averaging
--------------------------------------------------------------------------------
Data Setup successful
--------------------------------------------------------------------------------
                Treated Unit: California
               Control Units: Alabama, Arkansas, Colorado, Connecticut,
                              Delaware, Georgia, Idaho, Illinois, Indiana, Iowa,
                              Kansas, Kentucky, Louisiana, Maine, Minnesota,
                              Mississippi, Missouri, Montana, Nebraska, Nevada,
                              New Hampshire, New Mexico, North Carolina, North
                              Dakota, Ohio, Oklahoma, Pennsylvania, Rhode
                              Island, South Carolina, South Dakota, Tennessee,
                              Texas, Utah, Vermont, Virginia, West Virginia,
                              Wisconsin, Wyoming
--------------------------------------------------------------------------------
          Dependent Variable: cigsale
  MSPE minimized for periods: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
                              1980 1981 1982 1983 1984 1985 1986 1987 1988
Results obtained for periods: 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984
                              1985 1986 1987 1988
--------------------------------------------------------------------------------
                  Predictors: cigsale(1988) cigsale(1980) cigsale(1975)
                              beer(1984(1)1988) lnincome age15to24 retprice
--------------------------------------------------------------------------------
Unless period is specified
predictors are averaged over: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
                              1980 1981 1982 1983 1984 1985 1986 1987
--------------------------------------------------------------------------------

Second Step: Run Optimization
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Optimization done
--------------------------------------------------------------------------------

Third Step: Obtain Results
--------------------------------------------------------------------------------
Loss: Root Mean Squared Prediction Error

---------------------
   RMSPE |  1.939731 
---------------------
--------------------------------------------------------------------------------
Unit Weights:

----------------------------
         Co_No | Unit_Weight
---------------+------------
       Alabama |           0
      Arkansas |           0
      Colorado |        .265
   Connecticut |        .111
      Delaware |           0
       Georgia |           0
         Idaho |           0
      Illinois |           0
       Indiana |           0
          Iowa |           0
        Kansas |           0
      Kentucky |           0
     Louisiana |           0
         Maine |           0
     Minnesota |           0
   Mississippi |           0
      Missouri |           0
       Montana |           0
      Nebraska |           0
        Nevada |        .251
 New Hampshire |           0
    New Mexico |           0
North Carolina |           0
  North Dakota |           0
          Ohio |           0
      Oklahoma |           0
  Pennsylvania |           0
  Rhode Island |           0
South Carolina |           0
  South Dakota |           0
     Tennessee |           0
         Texas |           0
          Utah |        .374
       Vermont |           0
      Virginia |           0
 West Virginia |           0
     Wisconsin |           0
       Wyoming |           0
----------------------------
--------------------------------------------------------------------------------
Predictor Balance:

------------------------------------------------------
                               |   Treated  Synthetic 
-------------------------------+----------------------
                 cigsale(1988) |      90.1    92.8887 
                 cigsale(1980) |     120.2   120.3909 
                 cigsale(1975) |     127.1   126.8016 
             beer(1984(1)1988) |     24.28   23.22006 
                      lnincome |  10.02489   9.871835 
                     age15to24 |  .1798367   .1839628 
                      retprice |  63.81667   62.48484 
------------------------------------------------------
--------------------------------------------------------------------------------

.                 mat list e(V_matrix);

symmetric e(V_matrix)[7,7]
               cigsale(1988)  cigsale(1980)  cigsale(1975)   beer(1~1988)
cigsale(1988)      .06626532
cigsale(1980)              0      .38705996
cigsale(1975)              0              0      .53962531
 beer(1~1988)              0              0              0      .00182017
     lnincome              0              0              0              0
    age15to24              0              0              0              0
     retprice              0              0              0              0

                    lnincome      age15to24       retprice
     lnincome      .00176704
    age15to24              0      .00025756
     retprice              0              0      .00320464

.                 * (1) in line 30 means show each year
> 
> #delimit cr
> 
> graph save Graph ../figures/synth_tx.gph, replace

end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. #delimit;
delimiter now ;
. synth   cigsale
>                 cigsale(1988) cigsale(1980) cigsale(1975)
>                 beer(1984(1)1988) lnincome age15to24 retprice
>                 ,               
>                 trunit(3) trperiod(1988)
>                 mspeperiod(1970(1)1988) resultsperiod(1970(1)2000) 
>                 keep(../data/synth/synth_bmprate.dta) replace fig;
--------------------------------------------------------------------------------
Synthetic Control Method for Comparative Case Studies
--------------------------------------------------------------------------------

First Step: Data Setup
--------------------------------------------------------------------------------
control units: for 38 of out 38 units missing obs for predictor lnincome in peri
> od 1970 -ignored for averaging
control units: for 38 of out 38 units missing obs for predictor lnincome in peri
> od 1971 -ignored for averaging
treated unit: for 1 of out 1 units missing obs for predictor lnincome in period 
> 1970 -ignored for averaging
treated unit: for 1 of out 1 units missing obs for predictor lnincome in period 
> 1971 -ignored for averaging
--------------------------------------------------------------------------------
Data Setup successful
--------------------------------------------------------------------------------
                Treated Unit: California
               Control Units: Alabama, Arkansas, Colorado, Connecticut,
                              Delaware, Georgia, Idaho, Illinois, Indiana, Iowa,
                              Kansas, Kentucky, Louisiana, Maine, Minnesota,
                              Mississippi, Missouri, Montana, Nebraska, Nevada,
                              New Hampshire, New Mexico, North Carolina, North
                              Dakota, Ohio, Oklahoma, Pennsylvania, Rhode
                              Island, South Carolina, South Dakota, Tennessee,
                              Texas, Utah, Vermont, Virginia, West Virginia,
                              Wisconsin, Wyoming
--------------------------------------------------------------------------------
          Dependent Variable: cigsale
  MSPE minimized for periods: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
                              1980 1981 1982 1983 1984 1985 1986 1987 1988
Results obtained for periods: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
                              1980 1981 1982 1983 1984 1985 1986 1987 1988 1989
                              1990 1991 1992 1993 1994 1995 1996 1997 1998 1999
                              2000
--------------------------------------------------------------------------------
                  Predictors: cigsale(1988) cigsale(1980) cigsale(1975)
                              beer(1984(1)1988) lnincome age15to24 retprice
--------------------------------------------------------------------------------
Unless period is specified
predictors are averaged over: 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979
                              1980 1981 1982 1983 1984 1985 1986 1987
--------------------------------------------------------------------------------

Second Step: Run Optimization
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Optimization done
--------------------------------------------------------------------------------

Third Step: Obtain Results
--------------------------------------------------------------------------------
Loss: Root Mean Squared Prediction Error

---------------------
   RMSPE |  1.939731 
---------------------
--------------------------------------------------------------------------------
Unit Weights:

----------------------------
         Co_No | Unit_Weight
---------------+------------
       Alabama |           0
      Arkansas |           0
      Colorado |        .265
   Connecticut |        .111
      Delaware |           0
       Georgia |           0
         Idaho |           0
      Illinois |           0
       Indiana |           0
          Iowa |           0
        Kansas |           0
      Kentucky |           0
     Louisiana |           0
         Maine |           0
     Minnesota |           0
   Mississippi |           0
      Missouri |           0
       Montana |           0
      Nebraska |           0
        Nevada |        .251
 New Hampshire |           0
    New Mexico |           0
North Carolina |           0
  North Dakota |           0
          Ohio |           0
      Oklahoma |           0
  Pennsylvania |           0
  Rhode Island |           0
South Carolina |           0
  South Dakota |           0
     Tennessee |           0
         Texas |           0
          Utah |        .374
       Vermont |           0
      Virginia |           0
 West Virginia |           0
     Wisconsin |           0
       Wyoming |           0
----------------------------
--------------------------------------------------------------------------------
Predictor Balance:

------------------------------------------------------
                               |   Treated  Synthetic 
-------------------------------+----------------------
                 cigsale(1988) |      90.1    92.8887 
                 cigsale(1980) |     120.2   120.3909 
                 cigsale(1975) |     127.1   126.8016 
             beer(1984(1)1988) |     24.28   23.22006 
                      lnincome |  10.02489   9.871835 
                     age15to24 |  .1798367   .1839628 
                      retprice |  63.81667   62.48484 
------------------------------------------------------
--------------------------------------------------------------------------------

.                 mat list e(V_matrix);

symmetric e(V_matrix)[7,7]
               cigsale(1988)  cigsale(1980)  cigsale(1975)   beer(1~1988)
cigsale(1988)      .06626532
cigsale(1980)              0      .38705996
cigsale(1975)              0              0      .53962531
 beer(1~1988)              0              0              0      .00182017
     lnincome              0              0              0              0
    age15to24              0              0              0              0
     retprice              0              0              0              0

                    lnincome      age15to24       retprice
     lnincome      .00176704
    age15to24              0      .00025756
     retprice              0              0      .00320464

.                 * (1) in line 30 means show each year
> 
> #delimit cr

end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. graph save Graph ../figures/synth_tx.gph, replace
(file ../figures/synth_tx.gph saved)

. 
end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. * Plot the gap in predicted error
. use ../data/synth/synth_bmprate.dta, clear
(Tobacco Sales in 39 US States)

. keep _Y_treated _Y_synthetic _time

. drop if _time==.
(7 observations deleted)

. rename _time year

. rename _Y_treated  treat

. rename _Y_synthetic counterfact

. gen gap48=treat-counterfact

. sort year 

. twoway (line gap48 year,lp(solid)lw(vthin)lcolor(black)), yline(0, lpattern(sh
> ortdash) lcolor(black)) xline(1993, lpattern(shortdash) lcolor(black)) xtitle(
> "",si(medsmall)) xlabel(#10) ytitle("Gap in black male prisoner prediction err
> or", size(medsmall)) legend(off)

. save ../data/synth/synth_bmprate_48.dta, replace
(note: file ../data/synth/synth_bmprate_48.dta not found)
file ../data/synth/synth_bmprate_48.dta saved

. 
end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. * Inference 1 placebo test
. #delimit;
delimiter now ;
. set more off;

. use ../data/smoking.dta, replace;
(Tobacco Sales in 39 US States)

. 
end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. 
. numlabel add
option add or remove should be specified
r(198);

end of do-file

r(198);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. local statelist  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 2
> 4 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39;

. 
end of do-file

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. foreach i of local statelist {;
program error:  code follows on the same line as open brace
r(198);

end of do-file

r(198);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. te state
last estimates not found
r(301);

end of do-file

r(301);

. do "/var/folders/st/xzrptnmx0lb7r93b976p0jc40000gn/T//SD00614.000000"

. * Inference 1 placebo test
. #delimit;
delimiter now ;
. set more off;

. use ../data/smoking.dta, replace;
(Tobacco Sales in 39 US States)

. local statelist  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 2
> 4 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39;

. foreach i of local statelist {;
  2. synth   cigsale
>                 cigsale(1988) cigsale(1980) cigsale(1975)
>                 beer(1984(1)1988) lnincome age15to24 retprice
>                 ,               
>                         trunit(`i') trperiod(1988)
>                         mspeperiod(1970(1)1988) resultsperiod(1970(1)2000)
>                         keep(../data/synth/synth_bmprate_`i'.dta) replace;
  3.                         matrix state`i' = e(RMSPE);
  4.  /* check the V matrix*/
>                         };
variable index not found
r(111);

end of do-file

r(111);

